
<!-- saved from url=(0086)https://app.aluracursos.com/course/spring-boot-3-api-para-su-implementacion/task/84605 -->
<html lang="pt-BR" data-product="alura_espanhol" style="scroll-behavior: smooth;"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><link rel="stylesheet" type="text/css" href="./haga_lo_que_hicimos_files/clipper.647d33f8.css">
<link rel="stylesheet" href="./haga_lo_que_hicimos_files/back-to-top.9a8b5967.css">
<link rel="stylesheet" href="./haga_lo_que_hicimos_files/videoShortcutsModal.e1c7fc31.css">
<link rel="stylesheet" href="./haga_lo_que_hicimos_files/modal.5da2b30a.css">
<link rel="stylesheet" href="./haga_lo_que_hicimos_files/modalCoursePreviewMode.fe9f769f.css">

























	
	<meta name="viewport" content="width=device-width, initial-scale=1">
	

	

	
		




    
        
        
            <!-- Google Tag Manager -->
            <script type="text/javascript" async="" src="./haga_lo_que_hicimos_files/js"></script><script async="" src="./haga_lo_que_hicimos_files/analytics.js.descarga"></script><script type="text/javascript" async="" src="./haga_lo_que_hicimos_files/js(1)"></script><script async="" src="./haga_lo_que_hicimos_files/gtm.js.descarga"></script><script>
                ;(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                })(window,document,'script','dataLayerAlura','GTM-PFCN2KV');
            </script>
            <!-- End Google Tag Manager -->
        
    


    <script>
        let dataLayerAluraTest = window.dataLayerAluraTest || [];
        let dataLayerAlura = window.dataLayerAlura || [];
        dataLayerAlura.push({
            'event': 'virtual_page_view',
            'page_category': 'Aula',
            
            
            
                
                    
                    
                        
                        'user_id': '576082',
                        'plan': 'Oracle Next Education F2 T5',
                        'type': 'B2B',
                        'company_id':'5013',
                        'first_purchase_date': '2023-03-28',
                        'last_purchase_date': '2023-03-28',
                        'expiration_date': '2023-10-04',
                        'email': 'b7a5de8d38d6e9c501dc677df972f9557de039ce9e8dc8976e0d6c048a508798'
                    
                
            
        });
    </script>





	

	<title>Spring Boot 3: documentar, probar y preparar una API para su implementación: Aula 2 - Actividad 8 Haga lo que hicimos en aula | Alura Latam - Cursos online de tecnologia</title>
	
	<link rel="shortcut icon" href="https://app.aluracursos.com/assets/images/aluraespanhol/favicon.ico">
	
	<link href="./haga_lo_que_hicimos_files/css" rel="stylesheet">
	<link rel="preconnect" href="https://fonts.gstatic.com/">

	<link rel="stylesheet" href="./haga_lo_que_hicimos_files/video-js.7b9aee00.css">
	<link rel="stylesheet" href="./haga_lo_que_hicimos_files/silvermine-videojs-quality-selector.min.de928d55.css">
	<link rel="stylesheet" href="./haga_lo_que_hicimos_files/prettify.9c184279.css">
	<link rel="stylesheet" href="./haga_lo_que_hicimos_files/github.754087c4.css">

	<link rel="stylesheet" href="./haga_lo_que_hicimos_files/base.f643e441.css">
	<link rel="stylesheet" href="./haga_lo_que_hicimos_files/formattedText.e58775de.css">
	
	<link rel="stylesheet" href="./haga_lo_que_hicimos_files/container.ca700c42.css">
	<link rel="stylesheet" href="./haga_lo_que_hicimos_files/classPage.ee5a0101.css">
	<link rel="stylesheet" href="./haga_lo_que_hicimos_files/menuSettings.825e8801.css">
	<link rel="stylesheet" href="./haga_lo_que_hicimos_files/taskProgress.a5300583.css">
	<link rel="stylesheet" href="./haga_lo_que_hicimos_files/taskMessageInfo.67eb9bc6.css">
	<link rel="stylesheet" href="./haga_lo_que_hicimos_files/alternativeList.a80939d3.css">
	<link rel="stylesheet" href="./haga_lo_que_hicimos_files/taskFeedback.4bda0782.css">
	<link rel="stylesheet" href="./haga_lo_que_hicimos_files/markdown.3ec31c65.css">
	<link rel="stylesheet" href="./haga_lo_que_hicimos_files/finishSection.bee005cf.css">
	<link rel="stylesheet" href="./haga_lo_que_hicimos_files/phrase.6d459a32.css">
	<link rel="stylesheet" href="./haga_lo_que_hicimos_files/hqexplanation.3ed41021.css">
	<link rel="stylesheet" href="./haga_lo_que_hicimos_files/openquestion.2889f14f.css">
	<link rel="stylesheet" href="./haga_lo_que_hicimos_files/textcontent.7298b79f.css">
	<link rel="stylesheet" href="./haga_lo_que_hicimos_files/video.e82ab0eb.css">
	<link rel="stylesheet" href="./haga_lo_que_hicimos_files/singlechoice.b545e19f.css">
	<link rel="stylesheet" href="./haga_lo_que_hicimos_files/music.8fe6cab6.css">
	<link rel="stylesheet" href="./haga_lo_que_hicimos_files/multiplechoice.70f60e4c.css">
	<link rel="stylesheet" href="./haga_lo_que_hicimos_files/videodialog.36286910.css">
	<link rel="stylesheet" href="./haga_lo_que_hicimos_files/fillintheblank.59273039.css">
	<link rel="stylesheet" href="./haga_lo_que_hicimos_files/speakingpractice.13b2c5c5.css">
	<link rel="stylesheet" href="./haga_lo_que_hicimos_files/pronunciationpractice.d512f574.css">
	<link rel="stylesheet" href="./haga_lo_que_hicimos_files/repetition.492af846.css">
	<link rel="stylesheet" href="./haga_lo_que_hicimos_files/genericVideo.4767d8de.css">
	<link rel="stylesheet" href="./haga_lo_que_hicimos_files/projectSubmit.ce2f9d80.css">
	<link rel="stylesheet" href="./haga_lo_que_hicimos_files/sortBlocks.7b9eb1fc.css">
	<link rel="stylesheet" href="./haga_lo_que_hicimos_files/extraContentTask.b2d126e6.css">
	<link rel="stylesheet" href="./haga_lo_que_hicimos_files/taskContent.1ef47209.css">
	<link rel="stylesheet" href="./haga_lo_que_hicimos_files/taskButtons.ed4fd65b.css">
	<link rel="stylesheet" href="./haga_lo_que_hicimos_files/alert.ec6bb786.css">
	<link rel="stylesheet" href="./haga_lo_que_hicimos_files/markdownEditor.600de57a.css">
	<link rel="stylesheet" href="./haga_lo_que_hicimos_files/audioPlayer.0a362c88.css">
	<link rel="stylesheet" href="./haga_lo_que_hicimos_files/notes.867f62ab.css">
	
	
	
	<link rel="stylesheet" href="./haga_lo_que_hicimos_files/successMessage.cb6c074e.css">

	<link rel="stylesheet" href="./haga_lo_que_hicimos_files/dark-mode.0598a04f.css">
	<link rel="stylesheet" href="./haga_lo_que_hicimos_files/taskFeedbackAnswer.72669c00.css">
	<link rel="stylesheet" href="./haga_lo_que_hicimos_files/theater-mode.91e2f524.css">
	<link rel="stylesheet" href="./haga_lo_que_hicimos_files/autoplay-videojs.eefac430.css">
	<link rel="stylesheet" href="./haga_lo_que_hicimos_files/linkSubmit.ddbc8743.css">

	
	
	<style type="text/css">
		.task:before, .video-js .vjs-play-progress {
			background-color: #2A7AE4;
		}


	</style>

	<!-- Remove cookie banner from hubspot -->
	<style>
		div#hs-eu-cookie-confirmation {
			display: none;
		}
	</style>

	<meta http-equiv="origin-trial" content="AymqwRC7u88Y4JPvfIF2F37QKylC04248hLCdJAsh8xgOfe/dVJPV3XS3wLFca1ZMVOtnBfVjaCMTVudWM//5g4AAAB7eyJvcmlnaW4iOiJodHRwczovL3d3dy5nb29nbGV0YWdtYW5hZ2VyLmNvbTo0NDMiLCJmZWF0dXJlIjoiUHJpdmFjeVNhbmRib3hBZHNBUElzIiwiZXhwaXJ5IjoxNjk1MTY3OTk5LCJpc1RoaXJkUGFydHkiOnRydWV9"><meta http-equiv="origin-trial" content="AymqwRC7u88Y4JPvfIF2F37QKylC04248hLCdJAsh8xgOfe/dVJPV3XS3wLFca1ZMVOtnBfVjaCMTVudWM//5g4AAAB7eyJvcmlnaW4iOiJodHRwczovL3d3dy5nb29nbGV0YWdtYW5hZ2VyLmNvbTo0NDMiLCJmZWF0dXJlIjoiUHJpdmFjeVNhbmRib3hBZHNBUElzIiwiZXhwaXJ5IjoxNjk1MTY3OTk5LCJpc1RoaXJkUGFydHkiOnRydWV9"></head>




<body class="darkmode ">
<script src="./haga_lo_que_hicimos_files/avatarOnError.f8bd8956.js.descarga"></script>




	


<!-- Google Tag Manager (noscript) -->
<noscript>
	<iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PFCN2KV"
				  height="0" width="0" style="display:none;visibility:hidden"></iframe>
</noscript>
<!-- End Google Tag Manager (noscript) -->



<section class="task  
 menu--inactive" data-allow-answer="true" data-task-section-exam="false" data-task-type="textcontent" data-task-id="84605" data-author-id="576082" data-course-code="spring-boot-3-api-para-su-implementacion" data-section-name="Reglas de negocio" data-section-id="11459" data-section-number="2" data-domain="app.aluracursos.com" data-hasfeedbackanswer="false" data-url-prefix="/" data-already-seen-task="true" data-course-name="Spring Boot 3: documentar, probar y preparar una API para su implementación" data-category-name="Programación" data-subcategory-name="Java" data-workload="12" data-teachers="jose viera">

	<section class="task-body">
		
		











<header class="task-body-header">
    













    <div class="container">

        
            
            <button title="" aria-label="" type="button" class="theatermode openMenu-button task-menu-button
                    " id="menu-button-header">
            </button>
        

        <h1 class="task-body-header-title">
            
            
            <svg class="task-body-header-title-svg" aria-label="Actividad de Sin respuesta del estudiante">
                <use xlink:href="/assets/images/classPage/icon-menu-icons.svg#DO_AFTER_ME"></use>
            </svg>
            <small>08</small>
            <span class="task-body-header-title-text"> Haga lo que hicimos en aula</span>
        </h1>
        
            <div class="task-body-header-actions">
                <a href="https://app.aluracursos.com/course/spring-boot-3-api-para-su-implementacion/task/84605/next" aria-hidden="true" class="task-actions-button task-actions-button-next task-submit bootcamp-primary-button-theme" style="background-color: #2A7AE4">Próxima Actividad</a>
            </div>
        


        
            







<div class="theater-video settings">
	<button type="button" class="settings-button" aria-label="Configuraciones">
		<svg class="settings-button-icon">
			<use xlink:href="/assets/images/classPage/icon-menu-icons.svg#MENU_SETTINGS"></use>
		</svg>
	</button>
	<div class="settings-box">
		<ul class="settings-box-list">
			
				<li class="settings-box-item settings-box-item-darkmode">
					<button class="dark-mode-action">
						Modo nocturno
					</button>
				</li>
			
			
				
				
				
				
					
						<li class="settings-box-item settings-box-item-suggestion"><a href="https://app.aluracursos.com/suggestions/new/spring-boot-3-api-para-su-implementacion/84605/question">Sugerir alteración</a></li>
					
				
			
			
		</ul>
		<span class="settings-box-title"></span>
	</div>
</div>

        
    </div>
</header>
		<div class="task-body__wrapper">
			



<section class="class-notes">
    <div class="class-notes-content">
        <h2 class="class-notes-title">Mi cuaderno del curso (beta)</h2>
        <p class="class-notes-description">Este es su cuaderno de anotaciones aquí en Alura Latam. Todo su contenido es visible apenas para tí.<a href="https://suporte.alura.com.br/article/308-meu-caderno-como-funciona" class="class-notes-faq-link">FAQ</a></p>
        <textarea name="text" id="courseNotebook-text" class="class-notes-text" cols="30" rows="10" maxlength="60000"></textarea>
        <div class="class-notes-save-wrapper">
            <span>
                <p class="class-notes-saved-text" aria-hidden="true" style="display: none">Notas guardadas</p>
                <p class="class-notes-limit-text" aria-hidden="true" style="display: none">¡No se pudo guardar! ¡Límite de caracteres alcanzado ({max})!</p>
            </span>
            <span class="class-notes-save-button-wrapper">
                <button class="class-notes-save-button" data-save-text="Guardar cuaderno" data-saving-text="Guardandando">
                   Guardar cuaderno</button>
            </span>
        </div>
        <button class="class-notes-close-button"></button>
    </div>
</section>
			<main class="task-body-main container" data-should-warn="false">
				







	
	
	
		





<section id="task-content" class="textContent">
	
	<div class="container">
		







<div class="video settings">
	<button type="button" class="settings-button" aria-label="Configuraciones">
		<svg class="settings-button-icon">
			<use xlink:href="/assets/images/classPage/icon-menu-icons.svg#MENU_SETTINGS"></use>
		</svg>
	</button>
	<div class="settings-box">
		<ul class="settings-box-list">
			
				<li class="settings-box-item settings-box-item-darkmode">
					<button class="dark-mode-action">
						Modo nocturno
					</button>
				</li>
			
			
				
				
				
				
					
						<li class="settings-box-item settings-box-item-suggestion"><a href="https://app.aluracursos.com/suggestions/new/spring-boot-3-api-para-su-implementacion/84605/question">Sugerir alteración</a></li>
					
				
			
			
		</ul>
		<span class="settings-box-title"></span>
	</div>
</div>

		<div class="formattedText" data-external-links="">
			<p>Para cada validación de las reglas de negocio, crearemos una clase específica para cada una de ellas. La primera regla trata sobre el horario de la clínica: "El horario de funcionamiento de la clínica es de lunes a sábado, de 07:00 a 19:00". Si llega una solicitud a nuestra API con una fecha programada para una consulta, ¿qué sucede si el cliente intenta programar una consulta para un domingo? ¿O para un lunes a las 4 de la mañana? Por eso necesitamos validar el horario de la consulta. Crearemos una clase para realizar esta validación.</p>
<p>En el IntelliJ abriremos el menú lateral del proyecto y, para organizar esta clase, crearemos un subpaquete. Con la carpeta "consulta" seleccionada, presionamos la combinación de teclas "Alt + insert" y seleccionaremos la opción "Paquete". Crearemos un nuevo paquete llamado "validaciones".</p>
<p>Dentro del paquete "validaciones", crearemos las clases. Primero, crearemos una nueva clase llamada "HorarioDeFuncionamientoClinica". La idea es crear un método dentro de esta clase para realizar la validación del horario de funcionamiento de la clínica. Crearemos el método "validar()" y recibiremos el DTO "DatosAgendarConsulta" como parámetro.</p>
<pre class="prettyprint"><code class="hljs language-typescript"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HorarioDeFuncionamientoClinica</span>{

   <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">validar</span>(<span class="hljs-params">DatosAgendarConsulta datos</span>) {

       }

}</code><button type="button" class="clipit">Copia el código</button></pre><p>Escribiremos var domingo igual a DayOfWeek.getDayOfWeek(), usaremos este método para obtener el día de la semana, y para verificar si es igual usaremos equals con el parámetro que indica el día de la semana que queremos comparar, en este caso el domingo, equals(DayOfWeek.SUNDAY). Esto nos devolverá un booleano, true si es domingo y false si no lo es.</p>
<pre class="prettyprint"><code class="hljs language-csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">HorarioDeFuncionamientoClinica</span>{
   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">validar</span>(<span class="hljs-params">DatosAgendarConsulta datos</span>)</span> {

<span class="hljs-keyword">var</span> domingo = DayOfWeek.SUNDAY.<span class="hljs-keyword">equals</span>(datos.fecha().getDayOfWeek());

     }
}</code><button type="button" class="clipit">Copia el código</button></pre><p>Seguiremos la misma lógica, será un booleano. Crearemos una variable llamada "antesDeApertura", igual a "datos.fecha().getHour())" y verificaremos si es menor que 7:</p>
<pre class="prettyprint"><code class="hljs language-csharp"><span class="hljs-keyword">var</span> antesDeApertura=datos.fecha().getHour()&lt;<span class="hljs-number">7</span>;</code><button type="button" class="clipit">Copia el código</button></pre><p>Realizaremos lo mismo para verificar si el horario es después del cierre. Crearemos una variable llamada "despuesDeCierre", igual a "datos.fecha().getHour()" y comprobaremos si es menor que las 18:00.</p>
<pre class="prettyprint"><code class="hljs language-csharp"><span class="hljs-keyword">var</span> despuesDeCierre=datos.fecha().getHour()&gt;<span class="hljs-number">19</span>;</code><button type="button" class="clipit">Copia el código</button></pre><p>El horario de funcionamiento de la clínica es de 7h a 19h. No puede haber una consulta a las 19h, la última consulta debe ser a las 18h. Además, una de las reglas de negocio dice que "Las consultas tienen una duración de 1 hora".</p>
<p>A continuación, haremos un if. Si es domingo, antes de la apertura de la clínica o después del cierre de la clínica, lanzaremos una excepción para indicar que es inválido, throw new ValidationException("Consulta fuera del horario de funcionamiento de la clínica").</p>
<pre class="prettyprint"><code class="hljs language-scss"><span class="hljs-built_in">if</span>(domingo || antesdDeApertura || despuesDeCierre){
   throw  new <span class="hljs-built_in">ValidationException</span>("El horario de atención de la clínica es de lunes a sábado, de <span class="hljs-number">07</span>:<span class="hljs-number">00</span> a <span class="hljs-number">19</span>:<span class="hljs-number">00</span> horas");
}</code><button type="button" class="clipit">Copia el código</button></pre><p>El codigo quedo asi</p>
<pre class="prettyprint"><code class="hljs language-csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">HorarioDeFuncionamientoClinica</span>{
   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">validar</span>(<span class="hljs-params">DatosAgendarConsulta datos</span>)</span> {

       <span class="hljs-keyword">var</span> domingo = DayOfWeek.SUNDAY.<span class="hljs-keyword">equals</span>(datos.fecha().getDayOfWeek());

       <span class="hljs-keyword">var</span> antesdDeApertura=datos.fecha().getHour()&lt;<span class="hljs-number">7</span>;
       <span class="hljs-keyword">var</span> despuesDeCierre=datos.fecha().getHour()&gt;<span class="hljs-number">19</span>;
       <span class="hljs-keyword">if</span>(domingo || antesdDeApertura || despuesDeCierre){
           <span class="hljs-keyword">throw</span>  <span class="hljs-keyword">new</span> ValidationException(<span class="hljs-string">"El horario de atención de la clínica es de lunes a sábado, de 07:00 a 19:00 horas"</span>);
       }
   }
}</code><button type="button" class="clipit">Copia el código</button></pre><p>¡Listo! Tenemos nuestra primera validación. El único objetivo de esta clase es ejecutar esa única validación. El código queda pequeño, simple y fácil de dar mantenimiento y de probar de manera automatizada.</p>
<p>Ahora tenemos que hacer el código de las otras validaciones. La siguiente validación de la lista es "Las consultas tienen una duración fija de 1 hora". Esta no necesitamos verificar, ya será implícita, la aplicación estará disponible de una en una hora para agendar la consulta.</p>
<p>Siguiente validación: "Las consultas deben ser agendadas con un mínimo de 30 minutos de antelación". Vamos a crear un validador para esto.
En nuestro proyecto, dentro del paquete de validaciones, vamos a insertar una nueva clase llamada HorarioDeAnticipacion.</p>
<p>Crearemos un método similar al que hicimos anteriormente.</p>
<pre class="prettyprint"><code class="hljs language-typescript"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HorarioDeAnticipacion</span>{

   <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">validar</span>(<span class="hljs-params">DatosAgendarConsulta datos</span>) {

   }
}</code><button type="button" class="clipit">Copia el código</button></pre><p>Vamos a agregar las variables horaDeConsulta y ahora:</p>
<pre class="prettyprint"><code class="hljs language-typescript"><span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">validar</span>(<span class="hljs-params">DatosAgendarConsulta datos</span>) {

   <span class="hljs-keyword">var</span> ahora = <span class="hljs-title class_">LocalDateTime</span>.<span class="hljs-title function_">now</span>();
   <span class="hljs-keyword">var</span> horaDeConsulta= datos.<span class="hljs-title function_">fecha</span>();

}</code><button type="button" class="clipit">Copia el código</button></pre><p>Ahora compararemos la diferencia en minutos entre esas fechas para lanzar una excepción en caso de que sea inferior a treinta.</p>
<p>Crearemos una variable llamada diferenciaDe30Minigual a Duration.between pasando como parámetro ahora y horaDeConsulta, seguido de .toMinutes() para obtener la duración en minutos.</p>
<pre class="prettyprint"><code class="hljs language-typescript"><span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">validar</span>(<span class="hljs-params">DatosAgendarConsulta datos</span>) {
   <span class="hljs-keyword">var</span> ahora = <span class="hljs-title class_">LocalDateTime</span>.<span class="hljs-title function_">now</span>();
   <span class="hljs-keyword">var</span> horaDeConsulta= datos.<span class="hljs-title function_">fecha</span>();

   <span class="hljs-keyword">var</span> diferenciaDe30Min= <span class="hljs-title class_">Duration</span>.<span class="hljs-title function_">between</span>(ahora,horaDeConsulta).<span class="hljs-title function_">toMinutes</span>()&lt;<span class="hljs-number">30</span>;

}</code><button type="button" class="clipit">Copia el código</button></pre><p>Ahora solo queda hacer un if. Si diferenciaDe30Min es menor que 30, lanzaremos una excepción con el mensaje: "La consulta debe ser agendada con una antelación mínima de 30 minutos".</p>
<pre class="prettyprint"><code class="hljs language-typescript"><span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">validar</span>(<span class="hljs-params">DatosAgendarConsulta datos</span>) {
   <span class="hljs-keyword">var</span> ahora = <span class="hljs-title class_">LocalDateTime</span>.<span class="hljs-title function_">now</span>();
   <span class="hljs-keyword">var</span> horaDeConsulta= datos.<span class="hljs-title function_">fecha</span>();

   <span class="hljs-keyword">var</span> diferenciaDe30Min= <span class="hljs-title class_">Duration</span>.<span class="hljs-title function_">between</span>(ahora,horaDeConsulta).<span class="hljs-title function_">toMinutes</span>()&lt;<span class="hljs-number">30</span>;
   <span class="hljs-keyword">if</span>(diferenciaDe30Min){
       <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ValidationException</span>(<span class="hljs-string">"Las consultas deben programarse con al menos 30 minutos de anticipación"</span>);
   }
}</code><button type="button" class="clipit">Copia el código</button></pre><p>En la clase MedicoActivo, la única diferencia es que usamos el Repositorio, que aún no se está inyectando, pronto hablaremos de eso.
Estamos buscando solo el atributo activo del médico, filtrando por el ID. Y si el médico no tiene ID, lanza una excepción.</p>
<p>Se creó el método findAtivoByID. En este caso, no quiero cargar el objeto completo del médico solo para verificar si el atributo activo está en true. Entonces, podemos hacer una consulta personalizada trayendo solo un atributo único, select m.ativo.</p>
<p>Luego tenemos la clase MedicoConConsulta. Aquí también es necesario consultar la base de datos para verificar si hay una consulta con este médico en la misma fecha.</p>
<p>Hicimos una consulta usando el patrón de nomenclatura de SpringData: existsByMedicoIdAndFecha(idMedico, fecha).</p>
<p>El PacienteActivo se parece al ValidadorMedicoActivo.</p>
<p>Y tenemos la validación para que el paciente no tenga consulta en la misma fecha, PacienteSinConsulta. También consulta la base de datos para ver si hay una consulta para este paciente, colocando la fecha de inicio y la fecha de finalización de ese día, tomando la primera y la última hora del día.</p>
<hr>
<p>Vamos a crear una interfaz en el proyecto. En el panel lateral, con el paquete de validaciones seleccionado, usaremos el atajo "Alt + Insert", elegiremos la opción "Java Class", la nombraremos como ValidadorDeConsultas y elegiremos la opción "Interface".</p>
<p>Una vez creada la interfaz, dentro de ella declararemos el método que las clases tienen en común, validar(DatosAgendarConsulta datos). No es necesario usar la palabra clave "public" ya que es implícito que todos los métodos de una interfaz son públicos.</p>
<pre class="prettyprint"><code class="hljs language-csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title">ValidadorDeConsultas</span> {
   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">validar</span>(<span class="hljs-params">DatosAgendarConsulta datos</span>)</span>;
}</code><button type="button" class="clipit">Copia el código</button></pre><p>Aquí no es necesario usar "public" porque es implícito que todos los métodos de una interfaz son públicos. Ahora, vamos a cambiar cada una de las clases para implementar esta interfaz. Empezando por la clase HorarioDeAnticipacion, vamos a agregar "implements ValidadorDeConsultas " en la firma de la clase, antes de abrir las llaves:</p>
<pre class="prettyprint"><code class="hljs language-java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HorarioDeAnticipacion</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">ValidadorDeConsultas</span></code><button type="button" class="clipit">Copia el código</button></pre><p>Haremos lo mismo con los otros validadores. Tenemos 6 validadores, haremos esto para cada una de las 6 clases.</p>
<p>De esta manera, podemos estandarizar el proyecto. Cada validador debe implementar esta interfaz ValidadorAgendamentoDeConsulta y, obligatoriamente, debe implementar el método validar(DatosAgendarConsulta). Solo el cuerpo del método de cada clase será diferente.</p>
<p>Otra cosa importante: para poder inyectar estas clases en algún lugar, Spring necesita conocerlas. Entonces, encima de ellas debe haber alguna anotación de Spring.</p>
<p>Podríamos poner la anotación @Service para indicar que es un servicio, una validación. Pero vamos a usar la anotación @Component que es para componentes genéricos. Porque a veces tenemos una clase que no es ni una clase de configuración, ni un controlador ni un servicio. Entonces podemos poner el @Component para indicarle a Spring que esta clase es un componente genérico y lo cargará en la inicialización del proyecto.</p>
<p>Podría ser el @Service también, pero dejaré el @Component para mostrar algo nuevo para ustedes.</p>
<p>Vamos a insertar @Component en todas las clases de validación.</p>
<pre class="prettyprint"><code class="hljs language-java"><span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HorarioDeAnticipacion</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">ValidadorDeConsultas</span></code><button type="button" class="clipit">Copia el código</button></pre><p>Ahora, con el @Component el Spring reconocerá estas clases y podremos inyectar el repository.</p>
<p>Podemos colocar @Autowired en las clases que tienen el repository como atributo, para que el Spring inyecte el repository automáticamente. El MedicoActivo quedará así, por ejemplo:</p>
<pre class="prettyprint"><code class="hljs language-java"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MedicoActivo</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">ValidadorDeConsultas</span>{
   <span class="hljs-meta">@Autowired</span>
   <span class="hljs-keyword">private</span> MedicoRepository repository;

}</code><button type="button" class="clipit">Copia el código</button></pre><p>En la interfaz no es necesario colocar ninguna anotación porque el Spring la carga automáticamente.</p>
<p>Para inyectar estos validadores en la clase service, la clase AgendaDeConsultaService, usaremos un esquema del Spring que nos facilitará la vida.</p>
<p>Podrías pensar que necesitamos inyectar cada uno de los validadores de la misma manera que estamos inyectando los repositorios. Pero ese es el problema que queremos evitar, no queremos declararlos uno por uno. Así que haremos un truco que el Spring nos permite hacer.</p>
<p>En el código de AgendaDeConsultaService, declararemos un atributo, lo anotaremos con @Autowired, pero este atributo será declarado como una lista de java.util.List y, dentro de la lista, declararemos la interfaz ValidadorDeConsultas y llamaremos a este atributo validadores.</p>
<pre class="prettyprint"><code class="hljs language-less"><span class="hljs-variable">@Autowired</span>
private PacienteRepository pacienteRepository;
<span class="hljs-variable">@Autowired</span>
private MedicoRepository medicoRepository;
<span class="hljs-variable">@Autowired</span>
private ConsultaRepository consultaRepository;
<span class="hljs-variable">@Autowired</span>
List&lt;ValidadorDeConsultas&gt; validadores;</code><button type="button" class="clipit">Copia el código</button></pre><p>Spring va a identificar automáticamente que estamos inyectando una lista y buscará todas las clases que implementan la interfaz ValidadorDeConsultas. Así, no importa la cantidad de validadores, el Spring inyectará uno por uno. Es mucho más práctico hacerlo de esta manera.</p>
<p>Ahora, en el método agendar(), antes de crear las variables del paciente y del médico, vamos a obtener esta lista de validadores y recorrerla con un forEach(v -&gt; v.validar(datos)).</p>
<pre class="prettyprint"><code class="hljs language-csharp"><span class="hljs-keyword">if</span>(datos.idMedico()!=<span class="hljs-literal">null</span> &amp;&amp; !medicoRepository.existsById(datos.idMedico())){
   <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> ValidacionDeIntegridad(<span class="hljs-string">"este id para el medico no fue encontrado"</span>);
}

validadores.forEach(v-&gt; v.validar(datos));

<span class="hljs-keyword">var</span> paciente = pacienteRepository.findById(datos.idPaciente()).<span class="hljs-keyword">get</span>();

<span class="hljs-keyword">var</span> medico = seleccionarMedico(datos);

<span class="hljs-keyword">if</span>(medico==<span class="hljs-literal">null</span>){
   <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> ValidacionDeIntegridad(<span class="hljs-string">"no existen medicos disponibles para este horario y especialidad"</span>);
}</code><button type="button" class="clipit">Copia el código</button></pre><p>De esta forma logramos inyectar todos los validadores y el código está bastante flexible.</p>
<p>Si queremos excluir un validador, basta con eliminar la clase de ese validador que queremos eliminar. No es necesario modificar la clase AgendaDeConsultaService, la lista simplemente quedará con una clase menos.</p>
<p>Observe cómo el código se ha vuelto flexible. Si surgen nuevas validaciones, si cambiamos una validación o si una validación deja de existir, no necesitaremos modificar la clase de servicio.</p>
<p>Ya hemos implementado la funcionalidad de programación de citas utilizando la clase de servicio y los principios SOLID. Pero aún no hemos probado. Ahora es el momento de probar, vamos a usar Postman para averiguar si todo funciona como se espera. En Postman , vamos a enviar una solicitud para programar una cita.</p>
<pre class="prettyprint"><code class="hljs language-bash">POST http://localhost:8080/consultas
{
    <span class="hljs-string">"idPaciente"</span>: 1,
    <span class="hljs-string">"idMedico"</span>: 1,
    <span class="hljs-string">"fecha"</span>: <span class="hljs-string">"2023-10-10T10:00,
}</span></code><button type="button" class="clipit">Copia el código</button></pre><p>Se produjo un error y apareció un mensaje diciendo que no se pudo conectar al servidor. Tal vez haya ocurrido algún problema en el proyecto y se haya detenido. Verifiquemos en la terminal "Run ApiApplication" del proyecto.</p>
<p>Está mostrando que hay alguna consulta con problem</p>
<pre class="prettyprint"><code class="hljs language-python"><span class="hljs-keyword">from</span> Medico m
where
m.<span class="hljs-built_in">id</span> = :<span class="hljs-built_in">id</span></code><button type="button" class="clipit">Copia el código</button></pre><p>Verifiquemos los repositories para localizar ese error. Empezaremos por MedicoRepository.</p>
<p>La última consulta que hicimos fue la findAtivoById.</p>
<pre class="prettyprint"><code class="hljs language-python"><span class="hljs-meta">@Query (<span class="hljs-params"><span class="hljs-string">"""
    select m.activo
    from Medico m
    where
    m.id = :id
    """</span></span>)</span>
    Boolean findActivoById(Long <span class="hljs-built_in">id</span> Medico);
}</code><button type="button" class="clipit">Copia el código</button></pre><p>Fue hasta bueno que ocurriera este problema para mostrarles algo importante. Esta consulta tiene m.id = :id. Spring Data asume que :id es el parámetro que viene en el método.</p>
<p>Pero en mi método, el parámetro no está como id, lo dejé como idMedico. Este problema ocurrió porque el nombre del parámetro en la query no coincide con el nombre del parámetro en el método, y por eso se produce este error.</p>
<p>El nombre del parámetro debe ser id, como está en la query:</p>
<pre class="prettyprint"><code class="hljs language-python"><span class="hljs-meta">   @Query(<span class="hljs-params"><span class="hljs-string">"""
            select m.activo
            from Medico m
            where
            m.id = :id
            """</span></span>)</span>
    Boolean findActivoById(Long <span class="hljs-built_in">id</span>);
}</code><button type="button" class="clipit">Copia el código</button></pre><p>Guardemos y verifiquemos el código del archivo PacienteRepository. También tiene el mismo problema, en el findAtivoById. En lugar de idPaciente, dejaremos solo id.</p>
<p>Corregiremos el mismo error en PacienteRepository. Guardaremos el proyecto y supervisaremos la reinicialización del proyecto en la pestaña "Run".</p>
<p>En principio, la aplicación se inició normalmente. Volvamos a Postman y disparemos nuevamente la solicitud para programar una consulta.</p>
<pre class="prettyprint"><code class="hljs language-bash">POST http://localhost:8080/consultas
{
    <span class="hljs-string">"idPaciente"</span>: 1,
    <span class="hljs-string">"idMedico"</span>: 1,
    <span class="hljs-string">"fecha"</span>: <span class="hljs-string">"2023-10-10T10:00,
}</span></code><button type="button" class="clipit">Copia el código</button></pre><p>Fue devuelto un 403 Forbidden. Tal vez ocurrió alguna excepción, vamos verificar en la pestaña "Run ApiApplication".</p>
<p>Se produjo la siguiente excepción:</p>
<p>java.lang.RuntimeException: ¡Token JWT inválido o caducado!</p>
<p>Esto sucedió porque ya hace algún tiempo que se hizo el inicio de sesión. Creo que el token de inicio de sesión tiene una validez de aproximadamente dos horas. Vamos a iniciar sesión de nuevo. En Postman, haga clic en "Iniciar sesión" y disparemos la solicitud.</p>
<pre class="prettyprint"><code class="hljs language-bash">POST http://localhost:8080/login
{
    <span class="hljs-string">"login"</span>: <span class="hljs-string">"maria@voll.med"</span>,
    <span class="hljs-string">"senha"</span>: <span class="hljs-string">"123456"</span>,

}</code><button type="button" class="clipit">Copia el código</button></pre><p>Mostró un nuevo token aleatorio, que vamos a copiar y pegar en la pestaña "Bearer" de la solicitud "Agendar Consultas". Vamos a borrar el token anterior y pegar este nuevo token en el campo "Token".</p>
<p>Luego vamos a enviar la solicitud para agendar una consulta, haciendo clic en "Send". Ahora ha devuelto un código de respuesta 200 OK, pero las informaciones son nulas.</p>
<pre class="prettyprint"><code class="hljs language-json"><span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"idMedico"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"idPaciente"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"fecha"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span>
<span class="hljs-punctuation">}</span>
</code><button type="button" class="clipit">Copia el código</button></pre><p>Esto está sucediendo porque no hemos cambiado el controlador. El controlador sigue con el return new pasando los parámetros como nulo. Vamos a abrir el paquete de controladores y vamos al ConsultaController para arreglar esto.</p>
<p>En el return del ResponseEntity estamos pasando new DatosDetalleConsulta, por lo que todo se está pasando como nulo. Ya no debemos pasar esta información nula, debemos recibir el objeto de programación que se creó.</p>
<p>En la clase AgendaDeConsultaService, el método agendar() es void. Vamos a quitar este void e insertar el objeto DatosDetalleConsulta. Y al final del método agendar() pondremos return new DatosDetalleConsulta() pasando como parámetro el objeto consulta.</p>
<pre class="prettyprint"><code class="hljs language-csharp"><span class="hljs-function"><span class="hljs-keyword">public</span> DatosDetalleConsulta <span class="hljs-title">agendar</span>(<span class="hljs-params">DatosAgendarConsulta datos</span>)</span>{

   <span class="hljs-keyword">if</span>(!pacienteRepository.findById(datos.idPaciente()).isPresent()){
       <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> ValidacionDeIntegridad(<span class="hljs-string">"este id para el paciente no fue encontrado"</span>);
   }

   <span class="hljs-keyword">if</span>(datos.idMedico()!=<span class="hljs-literal">null</span> &amp;&amp; !medicoRepository.existsById(datos.idMedico())){
       <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> ValidacionDeIntegridad(<span class="hljs-string">"este id para el medico no fue encontrado"</span>);
   }

   validadores.forEach(v-&gt; v.validar(datos));

   <span class="hljs-keyword">var</span> paciente = pacienteRepository.findById(datos.idPaciente()).<span class="hljs-keyword">get</span>();

   <span class="hljs-keyword">var</span> medico = seleccionarMedico(datos);

   <span class="hljs-keyword">if</span>(medico==<span class="hljs-literal">null</span>){
       <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> ValidacionDeIntegridad(<span class="hljs-string">"no existen medicos disponibles para este horario y especialidad"</span>);
   }

   <span class="hljs-keyword">var</span> consulta = <span class="hljs-keyword">new</span> Consulta(medico,paciente,datos.fecha());

   consultaRepository.save(consulta);

   <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> DatosDetalleConsulta(consulta);

}</code><button type="button" class="clipit">Copia el código</button></pre><p>Va a dar un error en "consulta", porque todavía no existe ese constructor, vamos usar el atajo "Alt + Enter" para crear el constructor que recibe el objeto consulta y llamamos a this(consulta.getId(), consulta.getMedico().getId(), consulta.getPaciente().getId(), consulta.getFecha()):</p>
<pre class="prettyprint"><code class="hljs language-scss">public record <span class="hljs-built_in">DatosDetalleConsulta</span>(Long id, Long idPaciente, Long idMedico, LocalDateTime fecha) {
   public <span class="hljs-built_in">DatosDetalleConsulta</span>(Consulta consulta) {
       <span class="hljs-built_in">this</span>(consulta.getId(),consulta<span class="hljs-selector-class">.getPaciente</span>()<span class="hljs-selector-class">.getId</span>(),consulta<span class="hljs-selector-class">.getMedico</span>()<span class="hljs-selector-class">.getId</span>(),consulta<span class="hljs-selector-class">.getFecha</span>());
   }
}
</code><button type="button" class="clipit">Copia el código</button></pre><p>Ahora tenemos un DTO con los datos siendo devueltos correctamente.</p>
<p>En ConsultaController, el método agendar() devuelve el DTO. Vamos guardar el DTO en una variable y en ResponseEntity.ok pasaremos el DTO, que fue devuelto por la service.</p>
<pre class="prettyprint"><code class="hljs language-typescript"><span class="hljs-meta">@PostMapping</span>
<span class="hljs-meta">@Transactional</span>
<span class="hljs-keyword">public</span> <span class="hljs-title class_">ResponseEntity</span> <span class="hljs-title function_">agendar</span>(<span class="hljs-params"><span class="hljs-meta">@RequestBody</span> <span class="hljs-meta">@Valid</span> DatosAgendarConsulta datos</span>) {
   <span class="hljs-keyword">var</span> dto= service.<span class="hljs-title function_">agendar</span>(datos);
   <span class="hljs-keyword">return</span> <span class="hljs-title class_">ResponseEntity</span>.<span class="hljs-title function_">ok</span>(dto);
}</code><button type="button" class="clipit">Copia el código</button></pre><p>En la peticion Agendar consulta, vamos a testar el envio de un paciente que no existe en la base de datos:</p>
<pre class="prettyprint"><code class="hljs language-bash">POST http://localhost:8080/consultas
{
    <span class="hljs-string">"idPaciente"</span>: 88888,
    <span class="hljs-string">"idMedico"</span>: 1,
    <span class="hljs-string">"fecha"</span>: <span class="hljs-string">"2023-10-10T10:00"</span>
}
</code><button type="button" class="clipit">Copia el código</button></pre><p>Al enviar la solicitud, devolvió el código 403 Forbidden. No debería devolver 403. Volviendo a la terminal de la IDE, podemos ver que está enviando la excepción ValidationException"Id do paciente informado no existe". Pero no está apareciendo para el usuario porque aún no hemos agregado esta validación en la clase que maneja las excepciones. Vamos a corregir eso.</p>
<p>En el paquete "errores", accedemos a la clase TratadorDeErrores y creamos un nuevo método para ValidationException:</p>
<pre class="prettyprint"><code class="hljs language-java"><span class="hljs-meta">@ExceptionHandler(ValidationException.class)</span>
<span class="hljs-keyword">public</span> ResponseEntity <span class="hljs-title function_">errorHandlerValidacionesDeNegocio</span><span class="hljs-params">(Exception e)</span>{
   <span class="hljs-keyword">return</span> ResponseEntity.badRequest().body(e.getMessage());
}</code><button type="button" class="clipit">Copia el código</button></pre><p>Entonces, si ocurre un error de regla de negocio, queremos devolver 400 Bad Request y en el cuerpo queremos enviar el mensaje de error, body(ex.getMessage()). Se ha realizado el tratamiento para la excepción.</p>
<p>En Postman,  reenviemos la solicitud POST para programar una consulta para un paciente sin ID en nuestra base de datos</p>
<pre class="prettyprint"><code class="hljs language-bash">POST http://localhost:8080/consultas
{
    <span class="hljs-string">"idPaciente"</span>: 88888,
    <span class="hljs-string">"idMedico"</span>: 1,
    <span class="hljs-string">"fecha"</span>: <span class="hljs-string">"2023-10-10T10:00"</span>
}
</code><button type="button" class="clipit">Copia el código</button></pre><p>Ahora funcionó correctamente. Devolvió el código 400 Bad Request y en el cuerpo el mensaje "¡Id del paciente informado no existe!".
Si pasamos un idMedico que no existe, muestra el mensaje "¡Id del médico informado no existe!". </p>
<p>Ahora podemos añadir un paciente que fue excluido, al enviar la solicitud muestra el mensaje "No se puede programar una consulta con un paciente excluido". Y si se inserta un médico que fue excluido, mostrará el mensaje "No se puede programar una consulta con un médico excluido".</p>
<p>Vamos a probar una regla más, podemos intentar programar una consulta un domingo o fuera del horario de atención. Mostrará el mensaje: "Consulta fuera del horario de atención de la clínica".</p>
<p>Al intentar pasar una consulta sin médico, sólo con la especialidad, se produjo un error. En la terminal de IntelliJ apareció el mensaje:</p>
<p>Column 'medico_id' no puede ser nulo trató de guardar una consulta con un médico que no existe. No debería haber intentado guardar la consulta en la base de datos. Vamos a verificar el código de la clase AgendaDeConsultaService.</p>
<p>Faltó un detalle importante en la lógica de elegir un médico aleatorio. Faltó una verificación. Estamos verificando si viene el id del médico. Si lo tiene, consultamos ese médico en la base de datos. Si no lo tiene, verificamos si se está eligiendo la especialidad y, si se está eligiendo, buscamos un médico que esté libre en esa fecha.</p>
<p>¿Pero qué pasa si no hay ningún médico libre en la fecha elegida? Falta ese escenario. En este caso, el return medicoRepository.seleccionarMedicoConEspecialidadEnFecha devolverá nulo.</p>
<p>Entonces, si esta consulta devuelve nulo, es porque no hay ningún médico libre en esa fecha y la consulta no puede realizarse.</p>
<p>En la línea en la que estamos eligiendo un médico, necesitamos insertar un if para insertar el mensaje "¡No hay médico disponible en esta fecha!".</p>
<pre class="prettyprint"><code class="hljs language-csharp"><span class="hljs-keyword">var</span> paciente = pacienteRepository.findById(datos.idPaciente()).<span class="hljs-keyword">get</span>();

<span class="hljs-keyword">var</span> medico = seleccionarMedico(datos);

<span class="hljs-keyword">if</span>(medico==<span class="hljs-literal">null</span>){
   <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> ValidacionDeIntegridad(<span class="hljs-string">"no existen médicos disponibles para este horario y especialidad"</span>);
}</code><button type="button" class="clipit">Copia el código</button></pre>
		</div>
		<div class="task-actions">
			






    
        
        <a href="https://app.aluracursos.com/forum/curso-spring-boot-3-api-para-su-implementacion/exercicio-haga-lo-que-hicimos-en-aula/84605/novo" class=" task-actions-button task-actions-button-forum bootcamp-secondary-button-theme" target="_blank">
            
                
                
                    Discutir en el Foro
                
            
        </a>
    



			
				
					<button class="task-actions-button task-actions-button-answer task-body-actions-button task-actions-button-showOpinion bootcamp-primary-button-theme">Ver opinión del instructor</button>
				
				
			
		</div>
		
			





<section id="task-feedback" class="task-feedback" aria-hidden="true">
	<section class="task-feedback-banner">
		<div class="container">
			<h3 class="task-feedback-banner-title">
				Opinión del instructor
			</h3>
		</div>
		







<div class="video settings">
	<button type="button" class="settings-button" aria-label="Configuraciones">
		<svg class="settings-button-icon">
			<use xlink:href="/assets/images/classPage/icon-menu-icons.svg#MENU_SETTINGS"></use>
		</svg>
	</button>
	<div class="settings-box">
		<ul class="settings-box-list">
			
				<li class="settings-box-item settings-box-item-darkmode">
					<button class="dark-mode-action">
						Modo nocturno
					</button>
				</li>
			
			
				
				
				
				
					
						<li class="settings-box-item settings-box-item-suggestion"><a href="https://app.aluracursos.com/suggestions/new/spring-boot-3-api-para-su-implementacion/84605/opinion">Sugerir alteración</a></li>
					
				
			
			
		</ul>
		<span class="settings-box-title"></span>
	</div>
</div>

	</section>
	
				<div class="formattedText" data-external-links="">
					<p>Continúe con sus estudios, y si tiene alguna pregunta, ¡no dude en usar nuestro foro!</p>
				</div>
			
</section>
		
	</div>
</section>
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	

				
					






	
	
		<section class="task-actions">
			<div class="container">
				






    
        
        <a href="https://app.aluracursos.com/forum/curso-spring-boot-3-api-para-su-implementacion/exercicio-haga-lo-que-hicimos-en-aula/84605/novo" class=" task-actions-button task-actions-button-forum bootcamp-secondary-button-theme" target="_blank">
            
                
                
                    Discutir en el Foro
                
            
        </a>
    



				
				
				
				
					<a href="https://app.aluracursos.com/course/spring-boot-3-api-para-su-implementacion/task/84605/next" style="background-color: #2A7AE4" class="task-actions-button task-body-actions-button task-actions-button-next bootcamp-next-button bootcamp-primary-button-theme">Próxima Actividad</a>
				
			</div>
		</section>
	


				
				
			</main>
		</div>
	</section>
	

















<button title="Abrir menú/Cerrar menú" aria-label="Abrir menú/Cerrar menú" type="button" class="openMenu-button task-body-button openMenu-button--inactive">
</button>

<aside class="task-menu task-menu-iframe" style="position: fixed;">
	<section class="task-menu-header">
		<button title="Abrir menú" aria-label="Abrir menú" type="button" class="openMenu-button task-menu-button openMenu-button--inactive"></button>
		<div class="task-menu-header-info">
			<a class="task-menu-header-info-title" href="https://app.aluracursos.com/course/spring-boot-3-api-para-su-implementacion" title="Ir para la página del curso">
				
					
					
						<img src="./haga_lo_que_hicimos_files/spring-boot-3-api-para-su-implementacion.svg" alt="ícone Spring Boot 3: documentar, probar y preparar una API para su implementación" class="task-menu-header-info-title-icon " width="37.5px" height="37.5px">
					
				
				<h2 class="task-menu-header-info-title-text">Spring Boot 3: documentar, probar y preparar una API para su implementación</h2>
			</a>
			
				<div class="task-menu-header-info-progress">
					
					<span class="task-menu-header-info-progress-percentage ">43%</span>
					
						
						
						
							
						
					
					<span class="task-menu-header-info-progress-bar" style="background-image: linear-gradient(to right, #9de482, #9de482 43%, transparent 43%);"></span>
				</div>
			

		</div>
	</section>
	
		<form class="task-menu-header-search" target="_blank" action="https://app.aluracursos.com/search/course/spring-boot-3-api-para-su-implementacion" method="get">
			<label class="task-menu-header-search-title" for="query">Buscar en este curso</label>
			<input class="task-menu-header-search-input" name="query" id="query" type="text" required="">
			<button class="task-menu-header-search-button">Buscar <img aria-hidden="true" class="task-menu-header-search-button-img" src="./haga_lo_que_hicimos_files/icon-new-page.svg"></button>
		</form>
	
	
	<section class="task-menu-section sr-only">
		<div class="task-menu-section-title">
			<span class="task-menu-section-title-number ">Aula<strong>02</strong>
				<span>de 05</span>
			</span>
			<h3 class="task-menu-section-title-text">
				Reglas de negocio
			</h3>
		</div>
	</section>
	<section class="task-menu-sections">
		<h2 class="task-menu-sections-title">
			Clase actual
		</h2>
		<select class="task-menu-sections-select" onchange="location.href=&#39;/course/spring-boot-3-api-para-su-implementacion/section/&#39;+this.value+&#39;/tasks&#39;;">
			
				<option value="11458">01. Agendamiento de consultas</option>
			
				<option value="11459" selected="">02. Reglas de negocio</option>
			
				<option value="11460">03. Documentación de la API</option>
			
				<option value="11461">04. Tests automatizados</option>
			
				<option value="11462">05. Build del proyecto</option>
			
		</select>
	</section>
	<nav class="task-menu-nav">
		<h2 class="task-menu-nav-title">
			Actividades
			<span>8 de 9</span>
		</h2>
		<ul class="task-menu-nav-list">
			
				
				<li class="task-menu-nav-item ">
					<a href="https://app.aluracursos.com/course/spring-boot-3-api-para-su-implementacion/task/84631" class="task-menu-nav-item-link task-menu-nav-item-link-HQ_EXPLANATION">
						
						
					<svg class="task-menu-nav-item-svg task-menu-nav-item-svg--done" aria-label="Actividad de Explicación completada">
						<use xlink:href="/assets/images/classPage/icon-menu-icons.svg#HQ_EXPLANATION"></use>
					</svg>
					<span class="task-menu-nav-item-number">01</span>
					<span class="task-menu-nav-item-text">
						<span class="task-menu-nav-item-title" title="Proyecto del aula anterior">
							Proyecto del aula anterior
						</span>
						
					</span></a>
				</li>
			
				
				<li class="task-menu-nav-item ">
					<a href="https://app.aluracursos.com/course/spring-boot-3-api-para-su-implementacion/task/84349" class="task-menu-nav-item-link task-menu-nav-item-link-VIDEO">
						
						
					<svg class="task-menu-nav-item-svg task-menu-nav-item-svg--done" aria-label="Actividad de Video completada">
						<use xlink:href="/assets/images/classPage/icon-menu-icons.svg#VIDEO"></use>
					</svg>
					<span class="task-menu-nav-item-number">02</span>
					<span class="task-menu-nav-item-text">
						<span class="task-menu-nav-item-title" title="Clases de validación">
							Clases de validación
						</span>
						
						<span class="task-menu-nav-item-infos">
							
								<span class="task-menu-nav-item-videoDuration" title="Ir para el Vídeo">12min</span>
							
						</span>
					</span>
					
					</a>
				</li>
			
				
				<li class="task-menu-nav-item ">
					<a href="https://app.aluracursos.com/course/spring-boot-3-api-para-su-implementacion/task/84539" class="task-menu-nav-item-link task-menu-nav-item-link-VIDEO">
						
						
					<svg class="task-menu-nav-item-svg task-menu-nav-item-svg--done" aria-label="Actividad de Video completada">
						<use xlink:href="/assets/images/classPage/icon-menu-icons.svg#VIDEO"></use>
					</svg>
					<span class="task-menu-nav-item-number">03</span>
					<span class="task-menu-nav-item-text">
						<span class="task-menu-nav-item-title" title="Validación">
							Validación
						</span>
						
						<span class="task-menu-nav-item-infos">
							
								<span class="task-menu-nav-item-videoDuration" title="Ir para el Vídeo">16min</span>
							
						</span>
					</span>
					
					</a>
				</li>
			
				
				<li class="task-menu-nav-item ">
					<a href="https://app.aluracursos.com/course/spring-boot-3-api-para-su-implementacion/task/84350" class="task-menu-nav-item-link task-menu-nav-item-link-VIDEO">
						
						
					<svg class="task-menu-nav-item-svg task-menu-nav-item-svg--done" aria-label="Actividad de Video completada">
						<use xlink:href="/assets/images/classPage/icon-menu-icons.svg#VIDEO"></use>
					</svg>
					<span class="task-menu-nav-item-number">04</span>
					<span class="task-menu-nav-item-text">
						<span class="task-menu-nav-item-title" title="Aplicando principios SOLID">
							Aplicando principios SOLID
						</span>
						
						<span class="task-menu-nav-item-infos">
							
								<span class="task-menu-nav-item-videoDuration" title="Ir para el Vídeo">17min</span>
							
						</span>
					</span>
					
					</a>
				</li>
			
				
				<li class="task-menu-nav-item ">
					<a href="https://app.aluracursos.com/course/spring-boot-3-api-para-su-implementacion/task/84623" class="task-menu-nav-item-link task-menu-nav-item-link-HQ_EXPLANATION">
						
						
					<svg class="task-menu-nav-item-svg task-menu-nav-item-svg--done" aria-label="Actividad de Explicación completada">
						<use xlink:href="/assets/images/classPage/icon-menu-icons.svg#COMPLEMENTARY_INFORMATION"></use>
					</svg>
					<span class="task-menu-nav-item-number">05</span>
					<span class="task-menu-nav-item-text">
						<span class="task-menu-nav-item-title" title="Para saber más: principios SOLID">
							Para saber más: principios SOLID
						</span>
						
					</span></a>
				</li>
			
				
				<li class="task-menu-nav-item ">
					<a href="https://app.aluracursos.com/course/spring-boot-3-api-para-su-implementacion/task/84351" class="task-menu-nav-item-link task-menu-nav-item-link-VIDEO">
						
						
					<svg class="task-menu-nav-item-svg task-menu-nav-item-svg--done" aria-label="Actividad de Video completada">
						<use xlink:href="/assets/images/classPage/icon-menu-icons.svg#VIDEO"></use>
					</svg>
					<span class="task-menu-nav-item-number">06</span>
					<span class="task-menu-nav-item-text">
						<span class="task-menu-nav-item-title" title="Testando la agenda">
							Testando la agenda
						</span>
						
						<span class="task-menu-nav-item-infos">
							
								<span class="task-menu-nav-item-videoDuration" title="Ir para el Vídeo">20min</span>
							
						</span>
					</span>
					
					</a>
				</li>
			
				
				<li class="task-menu-nav-item ">
					<a href="https://app.aluracursos.com/course/spring-boot-3-api-para-su-implementacion/task/84571" class="task-menu-nav-item-link task-menu-nav-item-link-SINGLE_CHOICE">
						
						
					<svg class="task-menu-nav-item-svg task-menu-nav-item-svg--done" aria-label="Actividad de Única opción completada">
						<use xlink:href="/assets/images/classPage/icon-menu-icons.svg#SINGLE_CHOICE"></use>
					</svg>
					<span class="task-menu-nav-item-number">07</span>
					<span class="task-menu-nav-item-text">
						<span class="task-menu-nav-item-title" title="Buenas prácticas de programación">
							Buenas prácticas de programación
						</span>
						
					</span></a>
				</li>
			
				
				<li class="task-menu-nav-item task-menu-nav-item--selected">
					<a href="https://app.aluracursos.com/course/spring-boot-3-api-para-su-implementacion/task/84605" class="task-menu-nav-item-link task-menu-nav-item-link-TEXT_CONTENT">
						
						
					<svg class="task-menu-nav-item-svg task-menu-nav-item-svg--done" aria-label="Actividad de Sin respuesta del estudiante completada">
						<use xlink:href="/assets/images/classPage/icon-menu-icons.svg#DO_AFTER_ME"></use>
					</svg>
					<span class="task-menu-nav-item-number">08</span>
					<span class="task-menu-nav-item-text">
						<span class="task-menu-nav-item-title" title="Haga lo que hicimos en aula">
							Haga lo que hicimos en aula
						</span>
						
					</span></a>
				</li>
			
				
				<li class="task-menu-nav-item ">
					<a href="https://app.aluracursos.com/course/spring-boot-3-api-para-su-implementacion/task/84637" class="task-menu-nav-item-link task-menu-nav-item-link-HQ_EXPLANATION">
						
						
					<svg class="task-menu-nav-item-svg " aria-label="Actividad de Explicación inacabada">
						<use xlink:href="/assets/images/classPage/icon-menu-icons.svg#WHAT_WE_LEARNED"></use>
					</svg>
					<span class="task-menu-nav-item-number">09</span>
					<span class="task-menu-nav-item-text">
						<span class="task-menu-nav-item-title" title="Lo que aprendimos">
							Lo que aprendimos
						</span>
						
					</span></a>
				</li>
			
			
		</ul>
	</nav>
	<section class="task-menu-others">
		<h2 class="task-menu-others-title ">
			Otros Links
		</h2>
		
			<a class="task-menu-others-link task-menu-others-link-discord" href="https://discord.com/invite/bts3Yzb9uk" target="_blank">
				Discord Alura
			</a>
		
		
			
			<a href="https://app.aluracursos.com/forum/curso-spring-boot-3-api-para-su-implementacion/todos" class="task-menu-others-link task-menu-others-link-forum" title="Ir para el foro do curso" target="_blank">
				
					
					
					
						Foro del curso
					
				
			</a>
		
		<a href="https://app.aluracursos.com/dashboard" class="task-menu-others-link task-menu-others-link-curso" title="Ir para la página principal">Volver al Dashboard</a>
		
		<section class="task-container-flex  --task-button-column">
			
				<div class="task-group-border  --task-closed-border">
					<button class="task-edit-mode settings-box-item-darkmode">Modo nocturno</button>
				</div>
			
		</section>
	</section>
	<section class="task-menu-footer">
		<a class="task-menu-footer-user" href="https://app.aluracursos.com/user/sboboda1997" title="Ir para su página de usuario">
			<img src="./haga_lo_que_hicimos_files/k-kurt.png" alt="Gravatar de Kevin Sboboda" class="task-menu-footer-img" width="40px" height="40px">
			
				<p class="task-menu-footer-detalhes">
					<span class="task-menu-footer-detalhes-nome">Kevin Sboboda</span>
					<span class="task-menu-footer-detalhes-xp">
						77.2k xp
					</span>
				</p>
			
			<input type="hidden" value="">
			<input type="hidden" value="">
		</a>
		<a href="https://app.aluracursos.com/dashboard" class="task-menu-footer-logo">
			<img src="./haga_lo_que_hicimos_files/icon-menu-alura_espanhol.svg" alt="Logo da Alura Latam" class="task-menu-footer-logo-image" width="19px" height="32px" title="Ir para la página principal">
		</a>
	</section>
</aside>




    

</section><div class="full-screen__panel" style="display: none;">
				<img id="full-screen__image" class="full-screen__image" src="https://app.aluracursos.com/course/spring-boot-3-api-para-su-implementacion/task/84605" alt="">
				<div class="full-screen__actions">
				<button class="button buttonAction partitura-download">Anterior</button><button class="button buttonAction partitura-download">Sair</button><button class="button buttonAction partitura-download">Próximo</button></div> 
			</div>










	

	<script src="./haga_lo_que_hicimos_files/jquery-3.6.0.min.7c14a783.js.descarga"></script>
	<script src="./haga_lo_que_hicimos_files/buttonToggle.41524be9.js.descarga"></script>
	<script src="./haga_lo_que_hicimos_files/sectionMenu.2bb600e2.js.descarga" async=""></script>
	<script src="./haga_lo_que_hicimos_files/submitTaskVerifier.e6e3bd5f.js.descarga"></script>

    <script src="./haga_lo_que_hicimos_files/purify.min.bd253e08.js.descarga"></script>

	<script src="./haga_lo_que_hicimos_files/caret.2e5c0c9d.js.descarga" async=""></script>
	<script src="./haga_lo_que_hicimos_files/keydownWatchers.fdc4ec79.js.descarga" async=""></script>

	<script src="./haga_lo_que_hicimos_files/highlight.min.9b99da81.js.descarga" async=""></script>
	<script src="./haga_lo_que_hicimos_files/highlight.init.5870d8cf.js.descarga" async=""></script>

	<script src="./haga_lo_que_hicimos_files/preventsMultipleInteractions.19502e19.js.descarga" async=""></script>
	<script src="./haga_lo_que_hicimos_files/assessment.78d1fb98.js.descarga" async=""></script>

	<script src="./haga_lo_que_hicimos_files/menuSettings.fb011b3b.js.descarga"></script>
	<script src="./haga_lo_que_hicimos_files/aria.a82b16ad.js.descarga"></script>
	<script src="./haga_lo_que_hicimos_files/ProjectSubmit.1e34b47f.js.descarga"></script>
	<script src="./haga_lo_que_hicimos_files/LinkSubmit.60d53572.js.descarga"></script>
	<script src="./haga_lo_que_hicimos_files/classPage.fcad576a.js.descarga"></script>
	<script src="./haga_lo_que_hicimos_files/phrase.dfd04ee1.js.descarga"></script>
	<script src="./haga_lo_que_hicimos_files/feedback.7962df4a.js.descarga"></script>
	<script src="./haga_lo_que_hicimos_files/ExtraContentProgressRequest.aec577c3.js.descarga"></script>
	
	

	
	
	
	
	

	<script src="./haga_lo_que_hicimos_files/partitura.3e404a17.js.descarga"></script>
	<script src="./haga_lo_que_hicimos_files/audioProgress.049144a0.js.descarga"></script>
	<script src="./haga_lo_que_hicimos_files/audioPlayer.38483a63.js.descarga"></script>

		
	<script src="./haga_lo_que_hicimos_files/VideoTranscription.60f380a7.js.descarga"></script>
	<script src="./haga_lo_que_hicimos_files/MarkdownProcessing.2cb5d893.js.descarga"></script>
	<script src="./haga_lo_que_hicimos_files/clipboard.min.af8ab365.js.descarga"></script>
	<script src="./haga_lo_que_hicimos_files/Clipper.5c96d26f.js.descarga"></script>
	<script src="./haga_lo_que_hicimos_files/scroll-to-top.373e0d1c.js.descarga"></script>
	<script src="./haga_lo_que_hicimos_files/shortcuts-action.eba8a7c6.js.descarga"></script>
	<script src="./haga_lo_que_hicimos_files/ModalAndAlertHandler.9c67ae4b.js.descarga"></script>
    


	<script>
		new VideoTranscription();
		new MarkdownProcessing("https://app.aluracursos.com").onLoad();
		new Clipper("Copia el código", "Código copiado", "No se pudo copiar el código");
		window.addEventListener('load', () => new BackToTopButton().init());
		new ModalAndAlertHandler('spring-boot-3-api-para-su-implementacion').setupListeners();
	</script>



	

	<script src="./haga_lo_que_hicimos_files/darkMode.b7bc2dd7.js.descarga"></script>

	
		




<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    
    ga('create', 'UA-42101548-21', 'aluracursos.com');

    
        ga('set', 'userId', '576082');
    

    ga('require', 'displayfeatures');
    
    ga('send', 'pageview');
    
    
</script>
	

	<script>new DarkModeToggler().refreshListener()</script>
    



































<link href="./haga_lo_que_hicimos_files/uploadImages.7c1a29db.css" rel="stylesheet">

<script src="./haga_lo_que_hicimos_files/UploadProgress.098aba94.js.descarga"></script>
<script src="./haga_lo_que_hicimos_files/ImagesClient.f10726e3.js.descarga"></script>

<script src="./haga_lo_que_hicimos_files/marked.min.c69e14e8.js.descarga"></script>

<script src="./haga_lo_que_hicimos_files/enableForumButtons.1293253c.js.descarga"></script>

<script>
    var IMAGE_UPLOAD_MESSAGES = {
        imageUploadMessageInit: `Adjunte archivos arrastrándolos y soltándolos`,
        imageUploadMessageDragEnter: `Suelta la imagen para subir`,
        imageUploadMessageDrop: `Subiendo la imagen #images_names#`,
        imageUploadMessageProgress: `Subiendo la imagen #images_names#: #progress#%`,
        imageUploadMessageUploaded: `¡Imagen enviada con éxito!`,
        imageUploadMessageSizeUnits: `MB`,
        imageUploadMessageTag: `![Ingrese aquí la descripción de esta imagen para ayudar con la accesibilidad](#url#) `
    }
</script>


    
        <link href="./haga_lo_que_hicimos_files/hackeditor.min.fcf421a7.css" rel="stylesheet">
        <link href="./haga_lo_que_hicimos_files/hackeditor.custom.e0057fb6.css" rel="stylesheet">
        <link href="./haga_lo_que_hicimos_files/github.754087c4.css" rel="stylesheet">

        <script src="./haga_lo_que_hicimos_files/hackeditor.min.4c55d65b.js.descarga"></script>
        <script src="./haga_lo_que_hicimos_files/hackeditor.custom.b88c034d.js.descarga"></script>
        <script src="./haga_lo_que_hicimos_files/highlight.min.9b99da81.js.descarga"></script>
        <script>
            const setupEditorsOnPage = (e) => {
                const toolbarActionsHints = {
                    toggleHeadingActionHint: `Encabezado`,
                    toggleBoldActionHint: `Negrito`,
                    toggleItalicActionHint: `Cursiva`,
                    toggleOrderedListActionHint: `Lista ordenada`,
                    toggleUnorderedListActionHint: `Lista desordenada`,
                    togglePreviewActionHint: `Alternar vista previa`,
                    drawTableActionHint: `Insertar tabla`,
                    drawCodeActionHint: `Insertar bloque de código`,
                    drawLinkActionHint: `Insertar enlace`,
                    drawImageActionHint: `Insertar imagen`,
                    drawUploadedImageActionHint: `Carga de imagen`,
                    undoActionHint: `Deshacer`,
                    redoActionHint: `Rehacer`
                }

                const imageUploadErrors = {
                    imageErrorLimit: `¡Solo puede insertar 5 imágenes a la vez!`,
                    imageFileNotAllowed: `El archivo filename no está permitido, ¡solo imágenes!`,
                    imageVeryLarge: `El archivo filename supera el límite de 2 MB.`,
                    imageMaliciousFile: `El archivo filename contiene contenido malicioso.`
                }

                window.editors = window.editors || [];

                const editorsElements = window.editors.map(ed => ed.element.id);

                const textAreaEditors = Array.from(document.querySelectorAll('.hackeditor > textarea'));
                textAreaEditors
                    .filter(e => e.closest('.taskForms') == null)
                    .filter(e => editorsElements.length == 0 ? true : !editorsElements.includes(e.id))
                    .forEach(editorTextArea => {
                        const editor = setupHackEditor({
                            editorOptions: {
                                element: editorTextArea,
                                initialValue: editorTextArea.innerText,
                                syncPreview: true,
                                maxHeight: "300px",
                                toolbarActionsHints,
                                imageUploadMessages: IMAGE_UPLOAD_MESSAGES,
                                imageUploadErrors,
                                imageUploadClient: new ImagesClient(
                                    'https://www.gnarususercontent.com.br/images',
                                    'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpYXQiOjE2MTc4MDcxMzMsImtleSI6IjRiYWRlNDg1LTFjYjYtNDYzNy1iMTRlLWIxYTY2MzRhZDYyNyJ9.VHSsMMu_Qmm9G5HbJD9jA86B2hddM07XRbObvZRh0Ns',
                                    6,
                                    576082
                                ),
                                allowImageUpload: editorTextArea.dataset.allowImageUpload
                            },
                            extensions: {
                                DOMPurify,
                                marked,
                                hljs
                            }
                        });

                        window.editors.push({
                            instance: editor,
                            element: editorTextArea,
                        });

                        enableForumButtons();
                });
            }

            window.addEventListener('DOMContentLoaded', setupEditorsOnPage);
            document.addEventListener('change', setupEditorsOnPage);
        </script>
    
    

<script src="./haga_lo_que_hicimos_files/IframeChecker.05103d26.js.descarga"></script>



<button class="back-to-top" type="button"><span class="back-to-top__text">Voltar ao topo</span></button></body></html>